<!DOCTYPE html>
<html lang="zh" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ginx | zeddy</title>
    <meta name="description" content="A Convenient Framework">
    <meta name="generator" content="VitePress v1.1.3">
    <link rel="preload stylesheet" href="/doc/assets/style.DeIyO9fO.css" as="style">
    
    <script type="module" src="/doc/assets/app.C2yS8iqI.js"></script>
    <link rel="preload" href="/doc/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/doc/assets/chunks/framework.C9InrCCS.js">
    <link rel="modulepreload" href="/doc/assets/chunks/theme.BcV5UMKC.js">
    <link rel="modulepreload" href="/doc/assets/chunks/katex.rPiVaalG.js">
    <link rel="modulepreload" href="/doc/assets/chunks/c4Diagram-b2a90758.CykR4N-c.js">
    <link rel="modulepreload" href="/doc/assets/chunks/flowDiagram-5540d9b9.C08RTu7f.js">
    <link rel="modulepreload" href="/doc/assets/chunks/flowDiagram-v2-3b53844e.BXNkGIxX.js">
    <link rel="modulepreload" href="/doc/assets/chunks/erDiagram-47591fe2.SY7QcDQB.js">
    <link rel="modulepreload" href="/doc/assets/chunks/gitGraphDiagram-96e6b4ee.ZPLQphTb.js">
    <link rel="modulepreload" href="/doc/assets/chunks/ganttDiagram-9a3bba1f.DcqftBEn.js">
    <link rel="modulepreload" href="/doc/assets/chunks/infoDiagram-bcd20f53.yDgoEDVx.js">
    <link rel="modulepreload" href="/doc/assets/chunks/pieDiagram-79897490.Bknok-rS.js">
    <link rel="modulepreload" href="/doc/assets/chunks/quadrantDiagram-62f64e94.B0yz_sI8.js">
    <link rel="modulepreload" href="/doc/assets/chunks/xychartDiagram-ab372869.Bqwhk9ec.js">
    <link rel="modulepreload" href="/doc/assets/chunks/requirementDiagram-05bf5f74.C9WN2seU.js">
    <link rel="modulepreload" href="/doc/assets/chunks/sequenceDiagram-acc0e65c.D0vH57ko.js">
    <link rel="modulepreload" href="/doc/assets/chunks/classDiagram-30eddba6.DEI2Muh2.js">
    <link rel="modulepreload" href="/doc/assets/chunks/classDiagram-v2-f2df5561.B-sBcI4S.js">
    <link rel="modulepreload" href="/doc/assets/chunks/stateDiagram-0ff1cf1a.BNcdFZdX.js">
    <link rel="modulepreload" href="/doc/assets/chunks/stateDiagram-v2-9a9d610d.BRn205aL.js">
    <link rel="modulepreload" href="/doc/assets/chunks/journeyDiagram-4fe6b3dc.B-0DrRwu.js">
    <link rel="modulepreload" href="/doc/assets/chunks/flowchart-elk-definition-5fe447d6.Dl5WamZS.js">
    <link rel="modulepreload" href="/doc/assets/chunks/timeline-definition-fea2a41d.B7y9HJNO.js">
    <link rel="modulepreload" href="/doc/assets/chunks/mindmap-definition-f354de21.DLa5zPPe.js">
    <link rel="modulepreload" href="/doc/assets/chunks/sankeyDiagram-97764748.BSF0Vdpn.js">
    <link rel="modulepreload" href="/doc/assets/chunks/blockDiagram-91b80b7a.Btav0sna.js">
    <link rel="modulepreload" href="/doc/assets/chunks/virtual_mermaid-config.DDnGl6nM.js">
    <link rel="modulepreload" href="/doc/assets/zh_module_ginx.md.Bm9FohXi.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-9c7f7752><!--[--><!--]--><!--[--><span tabindex="-1" data-v-2d33b4df></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-2d33b4df> Skip to content </a><!--]--><!----><header class="VPNav" data-v-9c7f7752 data-v-d0a903a0><div class="VPNavBar has-sidebar top" data-v-d0a903a0 data-v-ebf5a18f><div class="wrapper" data-v-ebf5a18f><div class="container" data-v-ebf5a18f><div class="title" data-v-ebf5a18f><div class="VPNavBarTitle has-sidebar" data-v-ebf5a18f data-v-578e83d2><a class="title" href="/doc/zh/" data-v-578e83d2><!--[--><!--]--><!----><span data-v-578e83d2>zeddy</span><!--[--><!--]--></a></div></div><div class="content" data-v-ebf5a18f><div class="content-body" data-v-ebf5a18f><!--[--><!--]--><div class="VPNavBarSearch search" data-v-ebf5a18f><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-ebf5a18f data-v-5fd6f505><span id="main-nav-aria-label" class="visually-hidden" data-v-5fd6f505>Main Navigation</span><!--[--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-ebf5a18f data-v-392d217e data-v-4ba2b2ec><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="Change language" data-v-4ba2b2ec><span class="text" data-v-4ba2b2ec><span class="vpi-languages option-icon" data-v-4ba2b2ec></span><!----><span class="vpi-chevron-down text-icon" data-v-4ba2b2ec></span></span></button><div class="menu" data-v-4ba2b2ec><div class="VPMenu" data-v-4ba2b2ec data-v-457145fc><!----><!--[--><!--[--><div class="items" data-v-392d217e><p class="title" data-v-392d217e>中文</p><!--[--><div class="VPMenuLink" data-v-392d217e data-v-ca935efd><a class="VPLink link" href="/doc/module/ginx.html" data-v-ca935efd><!--[-->English<!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-ebf5a18f data-v-f327893e><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-f327893e data-v-b6484a4d data-v-b2e69d8e><span class="check" data-v-b2e69d8e><span class="icon" data-v-b2e69d8e><!--[--><span class="vpi-sun sun" data-v-b6484a4d></span><span class="vpi-moon moon" data-v-b6484a4d></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-ebf5a18f data-v-8c8ee13a data-v-eae296d0><!--[--><a class="VPSocialLink no-icon" href="https://github.com/zeddy-go/zeddy" aria-label="github" target="_blank" rel="noopener" data-v-eae296d0 data-v-7437008b><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-ebf5a18f data-v-0c7d884a data-v-4ba2b2ec><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-4ba2b2ec><span class="vpi-more-horizontal icon" data-v-4ba2b2ec></span></button><div class="menu" data-v-4ba2b2ec><div class="VPMenu" data-v-4ba2b2ec data-v-457145fc><!----><!--[--><!--[--><div class="group translations" data-v-0c7d884a><p class="trans-title" data-v-0c7d884a>中文</p><!--[--><div class="VPMenuLink" data-v-0c7d884a data-v-ca935efd><a class="VPLink link" href="/doc/module/ginx.html" data-v-ca935efd><!--[-->English<!--]--></a></div><!--]--></div><div class="group" data-v-0c7d884a><div class="item appearance" data-v-0c7d884a><p class="label" data-v-0c7d884a>Appearance</p><div class="appearance-action" data-v-0c7d884a><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-0c7d884a data-v-b6484a4d data-v-b2e69d8e><span class="check" data-v-b2e69d8e><span class="icon" data-v-b2e69d8e><!--[--><span class="vpi-sun sun" data-v-b6484a4d></span><span class="vpi-moon moon" data-v-b6484a4d></span><!--]--></span></span></button></div></div></div><div class="group" data-v-0c7d884a><div class="item social-links" data-v-0c7d884a><div class="VPSocialLinks social-links-list" data-v-0c7d884a data-v-eae296d0><!--[--><a class="VPSocialLink no-icon" href="https://github.com/zeddy-go/zeddy" aria-label="github" target="_blank" rel="noopener" data-v-eae296d0 data-v-7437008b><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-ebf5a18f data-v-0d79d714><span class="container" data-v-0d79d714><span class="top" data-v-0d79d714></span><span class="middle" data-v-0d79d714></span><span class="bottom" data-v-0d79d714></span></span></button></div></div></div></div><div class="divider" data-v-ebf5a18f><div class="divider-line" data-v-ebf5a18f></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-9c7f7752 data-v-c186d97c><div class="container" data-v-c186d97c><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-c186d97c><span class="vpi-align-left menu-icon" data-v-c186d97c></span><span class="menu-text" data-v-c186d97c>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-c186d97c data-v-a6768510><button data-v-a6768510>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-9c7f7752 data-v-287624f6><div class="curtain" data-v-287624f6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-287624f6><span class="visually-hidden" id="sidebar-aria-label" data-v-287624f6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-287624f6><section class="VPSidebarItem level-0 has-active" data-v-287624f6 data-v-280cc9f4><!----><div class="items" data-v-280cc9f4><!--[--><div class="VPSidebarItem level-1 is-link" data-v-280cc9f4 data-v-280cc9f4><div class="item" data-v-280cc9f4><div class="indicator" data-v-280cc9f4></div><a class="VPLink link link" href="/doc/zh/quickstart.html" data-v-280cc9f4><!--[--><p class="text" data-v-280cc9f4>快速开始</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1" data-v-280cc9f4 data-v-280cc9f4><div class="item" role="button" tabindex="0" data-v-280cc9f4><div class="indicator" data-v-280cc9f4></div><h3 class="text" data-v-280cc9f4>概念</h3><!----></div><div class="items" data-v-280cc9f4><!--[--><div class="VPSidebarItem level-2 is-link" data-v-280cc9f4 data-v-280cc9f4><div class="item" data-v-280cc9f4><div class="indicator" data-v-280cc9f4></div><a class="VPLink link link" href="/doc/zh/concept/ioc.html" data-v-280cc9f4><!--[--><p class="text" data-v-280cc9f4>IoC</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-280cc9f4 data-v-280cc9f4><div class="item" data-v-280cc9f4><div class="indicator" data-v-280cc9f4></div><a class="VPLink link link" href="/doc/zh/concept/module.html" data-v-280cc9f4><!--[--><p class="text" data-v-280cc9f4>模块</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 has-active" data-v-280cc9f4 data-v-280cc9f4><div class="item" role="button" tabindex="0" data-v-280cc9f4><div class="indicator" data-v-280cc9f4></div><h3 class="text" data-v-280cc9f4>模块列表</h3><!----></div><div class="items" data-v-280cc9f4><!--[--><div class="VPSidebarItem level-2 is-link" data-v-280cc9f4 data-v-280cc9f4><div class="item" data-v-280cc9f4><div class="indicator" data-v-280cc9f4></div><a class="VPLink link link" href="/doc/zh/module/configx.html" data-v-280cc9f4><!--[--><p class="text" data-v-280cc9f4>configx</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-280cc9f4 data-v-280cc9f4><div class="item" data-v-280cc9f4><div class="indicator" data-v-280cc9f4></div><a class="VPLink link link" href="/doc/zh/module/ginx.html" data-v-280cc9f4><!--[--><p class="text" data-v-280cc9f4>ginx</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-9c7f7752 data-v-b9757b05><div class="VPDoc has-sidebar has-aside" data-v-b9757b05 data-v-7a01fee6><!--[--><!--]--><div class="container" data-v-7a01fee6><div class="aside" data-v-7a01fee6><div class="aside-curtain" data-v-7a01fee6></div><div class="aside-container" data-v-7a01fee6><div class="aside-content" data-v-7a01fee6><div class="VPDocAside" data-v-7a01fee6 data-v-6e0967a7><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-6e0967a7 data-v-11795add><div class="content" data-v-11795add><div class="outline-marker" data-v-11795add></div><div class="outline-title" role="heading" aria-level="2" data-v-11795add>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-11795add><span class="visually-hidden" id="doc-outline-aria-label" data-v-11795add> Table of Contents for current page </span><ul class="VPDocOutlineItem root" data-v-11795add data-v-e4d379d6><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-6e0967a7></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-7a01fee6><div class="content-container" data-v-7a01fee6><!--[--><!--]--><main class="main" data-v-7a01fee6><div style="position:relative;" class="vp-doc _doc_zh_module_ginx" data-v-7a01fee6><div><h1 id="ginx" tabindex="-1">ginx <a class="header-anchor" href="#ginx" aria-label="Permalink to &quot;ginx&quot;">​</a></h1><p>ginx模块用于使用给定的handler处理相应的请求，底层使用gin。 该模块封装了gin的路由相关操作，实现了不限制handler方法的入参和出参列表的特性。 ginx模块在实例化时提供两个option方法：</p><ul><li>ginx.WithCustomEngine 用于使用自定义的gin实例</li><li>ginx.WithPrefix 用于设置读取配置的层级，默认是根层级</li></ul><p>ginx模块在初始化时会将自己以 ginx.Router 的接口类型注册到容器中， 其他需要使用http能力的模块只需在自己的Boot方法中拿到 ginx.Router 对象，添加路由即可。</p><h2 id="handler-入参" tabindex="-1">handler 入参 <a class="header-anchor" href="#handler-入参" aria-label="Permalink to &quot;handler 入参&quot;">​</a></h2><p>ginx 在将请求转到对应的handler时，会通过反射遍历入参。 如果参数类型在容器中能找到则使用容器中的对象传参， 如果参数类型在容器中无法找到，则尝试解析请求获得。</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//-----------userHandler-----------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//解析请求</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HelloReq</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//与gin的定义完全一样</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Username </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `form:&quot;username&quot; binding:&quot;required&quot;`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HelloResp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Text </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `json:&quot;text&quot;`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">uh </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">UserHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Hello</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">req</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HelloReq</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//从容器中获取对象</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">uh </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">UserHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Hello</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">c</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">viper</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Viper</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//也可以全都要,顺序无关</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">uh </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">UserHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Hello</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">req</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HelloReq</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">c</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">viper</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Viper</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//----------------module.Boot--------------------</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> container.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Invoke</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">r</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ginx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Router</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">userHandler</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">http</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">UserHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    r.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/hello&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, userHandler.Hello)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>另外，有些ginx定了一些特定的入参类型，来达到简化代码的效果：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 直接获取gin的Context对象</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">uh </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">UserHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Hello</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 获取分页, 解析url query-string 中的 page 和 size两个字段。</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">uh </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">UserHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Hello</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">page</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ginx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Page</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 获取筛选条件, 解析url query-string 中所有形如 filters[xxx] 的字段</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ginx.Filters类型可将这些字段转为 gormx 模块可理解的查询条件</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">uh </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">UserHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Hello</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">filters</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ginx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Filters</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 获取排序条件, 解析url query-string 中所有形如 sorts[xxx]的字段</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ginx.Sorts类型可将这些字段转为 gromx 模块可理解的排序条件</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">uh </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">UserHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Hello</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">sorts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ginx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Sorts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {}</span></span></code></pre></div><p>与上面的例子相同，这里的例子也可以一起作为同一个handler的参数。</p><h2 id="handler-出参" tabindex="-1">handler 出参 <a class="header-anchor" href="#handler-出参" aria-label="Permalink to &quot;handler 出参&quot;">​</a></h2><p>虽然出参仍然是可变的，但是为了ginx能正确处理出参并返回合适的响应，出参也是需要遵循一定的规则的。</p><p>ginx 默认的响应结构体遵循 Restful 风格。</p><p>首先，可以没有出参，这种情况 ginx 将认为函数一定会执行成功，并且没有响应体。返回的状态码是204。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>HttpStatusCode: 204</span></span>
<span class="line"><span>body: (无)</span></span></code></pre></div><p>在有出参的情况下，最后一个出参必须永远是 error 类型。ginx 将会判断 error 是否为nil，来判断响应的状态吗。 当error不为nil时，默认状态码为500。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>HttpStatusCode: 500</span></span>
<span class="line"><span>body: {&quot;message&quot;: err.Error(), &quot;data&quot;: null}</span></span></code></pre></div><p>如果您使用 errx 包返回的错误，您将能自定义状态码，和详情：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">errx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">New</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;数据正在被使用，无法删除&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, errx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">WithDetailMap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;detail&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;this is detail&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}), errx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">WithCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(http.StatusConflict))  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//这将会设置状态码为409</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>HttpStatusCode: 409</span></span>
<span class="line"><span>body: {&quot;message&quot;: &quot;数据正在被使用，无法删除&quot;, &quot;data&quot;: {&quot;detail&quot;: &quot;this is detail&quot;}}</span></span></code></pre></div><p>也就是说，当出参为1个时，这个出参一定为 error 类型。</p><p>当出参为2个时，最后一个一定是error类型，而第一个则是您想要返回的数据。当error不为nil时，与上面的例子相同。 当error为nil时效果如下：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>HttpStatusCode: 200</span></span>
<span class="line"><span>body: {&quot;message&quot;: &quot;&quot;, &quot;data&quot;: &lt;您的响应数据&gt;}</span></span></code></pre></div><p>当出参为3个时，error的规定与上面一致，第1个出参为元信息，第2个出参为您想返回的数据。 元信息为实现了ginx.IMeta接口的结构体或一个整数(int)。整数表示分页的总记录数：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>func (uh *UserHandler) Hello(page *ginx.Page) (total int, list []*Xxx, err error) {}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>将会返回：</span></span>
<span class="line"><span>HttpStatusCode: 200</span></span>
<span class="line"><span>body: {&quot;message&quot;: &quot;&quot;, &quot;data&quot;: &lt;您的响应数据&gt;, &quot;meta&quot;: {&quot;total&quot;: &lt;number&gt;}}</span></span></code></pre></div><p>而 ginx.IMeta 接口的结构体将会被转换成json字符串，其中如果有 code 字段，该字段将会作为状态码返回：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>func (uh *UserHandler) Hello(page *ginx.Page) (meta ginx.IMeta, list []*any, err error) {</span></span>
<span class="line"><span>	return &amp;ginx.Meta{CurrentPage: 1, Code: http.StatusCreated}, []*any{}, nil</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>将会返回：</span></span>
<span class="line"><span>HttpStatusCode: 201</span></span>
<span class="line"><span>body: {&quot;message&quot;: &quot;&quot;, &quot;data&quot;: &lt;您的响应数据&gt;, &quot;meta&quot;: {&quot;currentPage&quot;: 1}}</span></span></code></pre></div><p>出参最多只能有3个。</p><p>那么，如何定义文件下载呢？代码如下：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">uh </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">UserHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Hello</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">req</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HelloReq</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">file</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ginx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">IFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    f, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/path/to/file.mp3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    defer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> f.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    content, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> io.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ReadAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(f)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    file </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ginx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">NewFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(content)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-7a01fee6 data-v-9a032d81><!--[--><!--]--><!----><nav class="prev-next" data-v-9a032d81><div class="pager" data-v-9a032d81><a class="VPLink link pager-link prev" href="/doc/zh/module/configx.html" data-v-9a032d81><!--[--><span class="desc" data-v-9a032d81>Previous page</span><span class="title" data-v-9a032d81>configx</span><!--]--></a></div><div class="pager" data-v-9a032d81><!----></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"index.md\":\"D5XJPeEI\",\"zh_concept_module.md\":\"BN80lJV5\",\"module_configx.md\":\"C87jjTPA\",\"markdown-examples.md\":\"BBFyeFKt\",\"quickstart.md\":\"Bpt8CVfy\",\"zh_index.md\":\"CLWadiwW\",\"zh_concept_ioc.md\":\"ktV6d4ar\",\"concept_module.md\":\"IQueO1ym\",\"zh_module_configx.md\":\"C6-Q-6UX\",\"concept_ioc.md\":\"CpXG-047\",\"zh_module_ginx.md\":\"Bm9FohXi\",\"api-examples.md\":\"BGcoxGv1\",\"module_ginx.md\":\"B5fiqbhn\",\"zh_quickstart.md\":\"YC0nSiTK\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"zeddy\",\"description\":\"A Convenient Framework\",\"base\":\"/doc/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[],\"sidebar\":{\"/\":[{\"text\":\"\",\"items\":[{\"text\":\"quick start\",\"link\":\"/quickstart\"},{\"text\":\"concept\",\"items\":[{\"text\":\"IoC\",\"link\":\"/concept/ioc.md\"},{\"text\":\"module\",\"link\":\"/concept/module.md\"}]},{\"text\":\"module list\",\"items\":[{\"text\":\"configx\",\"link\":\"/module/configx\"},{\"text\":\"ginx\",\"link\":\"/module/ginx\"}]}]}],\"/zh/\":[{\"text\":\"\",\"items\":[{\"text\":\"快速开始\",\"link\":\"/zh/quickstart\"},{\"text\":\"概念\",\"items\":[{\"text\":\"IoC\",\"link\":\"/zh/concept/ioc.md\"},{\"text\":\"模块\",\"link\":\"/zh/concept/module.md\"}]},{\"text\":\"模块列表\",\"items\":[{\"text\":\"configx\",\"link\":\"/zh/module/configx\"},{\"text\":\"ginx\",\"link\":\"/zh/module/ginx\"}]}]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/zeddy-go/zeddy\"}]},\"locales\":{\"root\":{\"label\":\"English\",\"lang\":\"en\"},\"zh\":{\"label\":\"中文\",\"lang\":\"zh\"}},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>