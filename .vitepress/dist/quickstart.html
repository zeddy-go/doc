<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Quick Start | zeddy</title>
    <meta name="description" content="A Convenient Framework">
    <meta name="generator" content="VitePress v1.1.3">
    <link rel="preload stylesheet" href="/doc/assets/style.DeIyO9fO.css" as="style">
    
    <script type="module" src="/doc/assets/app.C2yS8iqI.js"></script>
    <link rel="preload" href="/doc/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/doc/assets/chunks/framework.C9InrCCS.js">
    <link rel="modulepreload" href="/doc/assets/chunks/theme.BcV5UMKC.js">
    <link rel="modulepreload" href="/doc/assets/chunks/katex.rPiVaalG.js">
    <link rel="modulepreload" href="/doc/assets/chunks/c4Diagram-b2a90758.CykR4N-c.js">
    <link rel="modulepreload" href="/doc/assets/chunks/flowDiagram-5540d9b9.C08RTu7f.js">
    <link rel="modulepreload" href="/doc/assets/chunks/flowDiagram-v2-3b53844e.BXNkGIxX.js">
    <link rel="modulepreload" href="/doc/assets/chunks/erDiagram-47591fe2.SY7QcDQB.js">
    <link rel="modulepreload" href="/doc/assets/chunks/gitGraphDiagram-96e6b4ee.ZPLQphTb.js">
    <link rel="modulepreload" href="/doc/assets/chunks/ganttDiagram-9a3bba1f.DcqftBEn.js">
    <link rel="modulepreload" href="/doc/assets/chunks/infoDiagram-bcd20f53.yDgoEDVx.js">
    <link rel="modulepreload" href="/doc/assets/chunks/pieDiagram-79897490.Bknok-rS.js">
    <link rel="modulepreload" href="/doc/assets/chunks/quadrantDiagram-62f64e94.B0yz_sI8.js">
    <link rel="modulepreload" href="/doc/assets/chunks/xychartDiagram-ab372869.Bqwhk9ec.js">
    <link rel="modulepreload" href="/doc/assets/chunks/requirementDiagram-05bf5f74.C9WN2seU.js">
    <link rel="modulepreload" href="/doc/assets/chunks/sequenceDiagram-acc0e65c.D0vH57ko.js">
    <link rel="modulepreload" href="/doc/assets/chunks/classDiagram-30eddba6.DEI2Muh2.js">
    <link rel="modulepreload" href="/doc/assets/chunks/classDiagram-v2-f2df5561.B-sBcI4S.js">
    <link rel="modulepreload" href="/doc/assets/chunks/stateDiagram-0ff1cf1a.BNcdFZdX.js">
    <link rel="modulepreload" href="/doc/assets/chunks/stateDiagram-v2-9a9d610d.BRn205aL.js">
    <link rel="modulepreload" href="/doc/assets/chunks/journeyDiagram-4fe6b3dc.B-0DrRwu.js">
    <link rel="modulepreload" href="/doc/assets/chunks/flowchart-elk-definition-5fe447d6.Dl5WamZS.js">
    <link rel="modulepreload" href="/doc/assets/chunks/timeline-definition-fea2a41d.B7y9HJNO.js">
    <link rel="modulepreload" href="/doc/assets/chunks/mindmap-definition-f354de21.DLa5zPPe.js">
    <link rel="modulepreload" href="/doc/assets/chunks/sankeyDiagram-97764748.BSF0Vdpn.js">
    <link rel="modulepreload" href="/doc/assets/chunks/blockDiagram-91b80b7a.Btav0sna.js">
    <link rel="modulepreload" href="/doc/assets/chunks/virtual_mermaid-config.DDnGl6nM.js">
    <link rel="modulepreload" href="/doc/assets/quickstart.md.Bpt8CVfy.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-9c7f7752><!--[--><!--]--><!--[--><span tabindex="-1" data-v-2d33b4df></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-2d33b4df> Skip to content </a><!--]--><!----><header class="VPNav" data-v-9c7f7752 data-v-d0a903a0><div class="VPNavBar has-sidebar top" data-v-d0a903a0 data-v-ebf5a18f><div class="wrapper" data-v-ebf5a18f><div class="container" data-v-ebf5a18f><div class="title" data-v-ebf5a18f><div class="VPNavBarTitle has-sidebar" data-v-ebf5a18f data-v-578e83d2><a class="title" href="/doc/" data-v-578e83d2><!--[--><!--]--><!----><span data-v-578e83d2>zeddy</span><!--[--><!--]--></a></div></div><div class="content" data-v-ebf5a18f><div class="content-body" data-v-ebf5a18f><!--[--><!--]--><div class="VPNavBarSearch search" data-v-ebf5a18f><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-ebf5a18f data-v-5fd6f505><span id="main-nav-aria-label" class="visually-hidden" data-v-5fd6f505>Main Navigation</span><!--[--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-ebf5a18f data-v-392d217e data-v-4ba2b2ec><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="Change language" data-v-4ba2b2ec><span class="text" data-v-4ba2b2ec><span class="vpi-languages option-icon" data-v-4ba2b2ec></span><!----><span class="vpi-chevron-down text-icon" data-v-4ba2b2ec></span></span></button><div class="menu" data-v-4ba2b2ec><div class="VPMenu" data-v-4ba2b2ec data-v-457145fc><!----><!--[--><!--[--><div class="items" data-v-392d217e><p class="title" data-v-392d217e>English</p><!--[--><div class="VPMenuLink" data-v-392d217e data-v-ca935efd><a class="VPLink link" href="/doc/zh/quickstart.html" data-v-ca935efd><!--[-->ä¸­æ–‡<!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-ebf5a18f data-v-f327893e><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-f327893e data-v-b6484a4d data-v-b2e69d8e><span class="check" data-v-b2e69d8e><span class="icon" data-v-b2e69d8e><!--[--><span class="vpi-sun sun" data-v-b6484a4d></span><span class="vpi-moon moon" data-v-b6484a4d></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-ebf5a18f data-v-8c8ee13a data-v-eae296d0><!--[--><a class="VPSocialLink no-icon" href="https://github.com/zeddy-go/zeddy" aria-label="github" target="_blank" rel="noopener" data-v-eae296d0 data-v-7437008b><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-ebf5a18f data-v-0c7d884a data-v-4ba2b2ec><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-4ba2b2ec><span class="vpi-more-horizontal icon" data-v-4ba2b2ec></span></button><div class="menu" data-v-4ba2b2ec><div class="VPMenu" data-v-4ba2b2ec data-v-457145fc><!----><!--[--><!--[--><div class="group translations" data-v-0c7d884a><p class="trans-title" data-v-0c7d884a>English</p><!--[--><div class="VPMenuLink" data-v-0c7d884a data-v-ca935efd><a class="VPLink link" href="/doc/zh/quickstart.html" data-v-ca935efd><!--[-->ä¸­æ–‡<!--]--></a></div><!--]--></div><div class="group" data-v-0c7d884a><div class="item appearance" data-v-0c7d884a><p class="label" data-v-0c7d884a>Appearance</p><div class="appearance-action" data-v-0c7d884a><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-0c7d884a data-v-b6484a4d data-v-b2e69d8e><span class="check" data-v-b2e69d8e><span class="icon" data-v-b2e69d8e><!--[--><span class="vpi-sun sun" data-v-b6484a4d></span><span class="vpi-moon moon" data-v-b6484a4d></span><!--]--></span></span></button></div></div></div><div class="group" data-v-0c7d884a><div class="item social-links" data-v-0c7d884a><div class="VPSocialLinks social-links-list" data-v-0c7d884a data-v-eae296d0><!--[--><a class="VPSocialLink no-icon" href="https://github.com/zeddy-go/zeddy" aria-label="github" target="_blank" rel="noopener" data-v-eae296d0 data-v-7437008b><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-ebf5a18f data-v-0d79d714><span class="container" data-v-0d79d714><span class="top" data-v-0d79d714></span><span class="middle" data-v-0d79d714></span><span class="bottom" data-v-0d79d714></span></span></button></div></div></div></div><div class="divider" data-v-ebf5a18f><div class="divider-line" data-v-ebf5a18f></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-9c7f7752 data-v-c186d97c><div class="container" data-v-c186d97c><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-c186d97c><span class="vpi-align-left menu-icon" data-v-c186d97c></span><span class="menu-text" data-v-c186d97c>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-c186d97c data-v-a6768510><button data-v-a6768510>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-9c7f7752 data-v-287624f6><div class="curtain" data-v-287624f6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-287624f6><span class="visually-hidden" id="sidebar-aria-label" data-v-287624f6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-287624f6><section class="VPSidebarItem level-0 has-active" data-v-287624f6 data-v-280cc9f4><!----><div class="items" data-v-280cc9f4><!--[--><div class="VPSidebarItem level-1 is-link" data-v-280cc9f4 data-v-280cc9f4><div class="item" data-v-280cc9f4><div class="indicator" data-v-280cc9f4></div><a class="VPLink link link" href="/doc/quickstart.html" data-v-280cc9f4><!--[--><p class="text" data-v-280cc9f4>quick start</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1" data-v-280cc9f4 data-v-280cc9f4><div class="item" role="button" tabindex="0" data-v-280cc9f4><div class="indicator" data-v-280cc9f4></div><h3 class="text" data-v-280cc9f4>concept</h3><!----></div><div class="items" data-v-280cc9f4><!--[--><div class="VPSidebarItem level-2 is-link" data-v-280cc9f4 data-v-280cc9f4><div class="item" data-v-280cc9f4><div class="indicator" data-v-280cc9f4></div><a class="VPLink link link" href="/doc/concept/ioc.html" data-v-280cc9f4><!--[--><p class="text" data-v-280cc9f4>IoC</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-280cc9f4 data-v-280cc9f4><div class="item" data-v-280cc9f4><div class="indicator" data-v-280cc9f4></div><a class="VPLink link link" href="/doc/concept/module.html" data-v-280cc9f4><!--[--><p class="text" data-v-280cc9f4>module</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1" data-v-280cc9f4 data-v-280cc9f4><div class="item" role="button" tabindex="0" data-v-280cc9f4><div class="indicator" data-v-280cc9f4></div><h3 class="text" data-v-280cc9f4>module list</h3><!----></div><div class="items" data-v-280cc9f4><!--[--><div class="VPSidebarItem level-2 is-link" data-v-280cc9f4 data-v-280cc9f4><div class="item" data-v-280cc9f4><div class="indicator" data-v-280cc9f4></div><a class="VPLink link link" href="/doc/module/configx.html" data-v-280cc9f4><!--[--><p class="text" data-v-280cc9f4>configx</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-280cc9f4 data-v-280cc9f4><div class="item" data-v-280cc9f4><div class="indicator" data-v-280cc9f4></div><a class="VPLink link link" href="/doc/module/ginx.html" data-v-280cc9f4><!--[--><p class="text" data-v-280cc9f4>ginx</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-9c7f7752 data-v-b9757b05><div class="VPDoc has-sidebar has-aside" data-v-b9757b05 data-v-7a01fee6><!--[--><!--]--><div class="container" data-v-7a01fee6><div class="aside" data-v-7a01fee6><div class="aside-curtain" data-v-7a01fee6></div><div class="aside-container" data-v-7a01fee6><div class="aside-content" data-v-7a01fee6><div class="VPDocAside" data-v-7a01fee6 data-v-6e0967a7><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-6e0967a7 data-v-11795add><div class="content" data-v-11795add><div class="outline-marker" data-v-11795add></div><div class="outline-title" role="heading" aria-level="2" data-v-11795add>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-11795add><span class="visually-hidden" id="doc-outline-aria-label" data-v-11795add> Table of Contents for current page </span><ul class="VPDocOutlineItem root" data-v-11795add data-v-e4d379d6><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-6e0967a7></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-7a01fee6><div class="content-container" data-v-7a01fee6><!--[--><!--]--><main class="main" data-v-7a01fee6><div style="position:relative;" class="vp-doc _doc_quickstart" data-v-7a01fee6><div><h1 id="quick-start" tabindex="-1">Quick Start <a class="header-anchor" href="#quick-start" aria-label="Permalink to &quot;Quick Start&quot;">â€‹</a></h1><p>Here are some project examples for you to get started quickly. In theory, as long as the app package can run the framework modules you define, any directory structure is feasible.</p><h2 id="http-service" tabindex="-1">HTTP Service <a class="header-anchor" href="#http-service" aria-label="Permalink to &quot;HTTP Service&quot;">â€‹</a></h2><p>Clone the code to your local machine:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> step1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --single-branch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git@github.com:zeddy-go/quickstart.git</span></span></code></pre></div><p>We can see the following directory structure:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>.</span></span>
<span class="line"><span>â”œâ”€â”€ conf                       // Configuration</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ config.go</span></span>
<span class="line"><span>â”‚   â””â”€â”€ config.yaml</span></span>
<span class="line"><span>â”œâ”€â”€ go.mod</span></span>
<span class="line"><span>â”œâ”€â”€ go.sum</span></span>
<span class="line"><span>â”œâ”€â”€ main.go                     // Entry file</span></span>
<span class="line"><span>â””â”€â”€ module                      // Modules</span></span>
<span class="line"><span>    â””â”€â”€ user                    // User module</span></span>
<span class="line"><span>        â”œâ”€â”€ iface               // Interface layer</span></span>
<span class="line"><span>        â”‚     â””â”€â”€ http          // HTTP interface</span></span>
<span class="line"><span>        â”‚         â””â”€â”€ user.go   // User handler</span></span>
<span class="line"><span>        â””â”€â”€ module.go           // Module entry</span></span></code></pre></div><p>We use the <code>embed</code> method to load configurations, then make changes to the configurations through environment variables. This approach is very convenient for containerized deployment scenarios.</p><p>We reference the <code>ginx</code> module and the <code>user</code> module. The <code>ginx</code> module is a built-in framework module that handles HTTP requests, using <code>gin</code> at the bottom layer.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>You can use any HTTP library you like to write your own HTTP processing module. Or you can reinvent the wheel ğŸ’¯.</p></div><p>The <code>user</code> module is our own business module. The <code>user</code> module implements a handler method that outputs a JSON response of &quot;hello xxxx!&quot; when it receives a request (<code>module/user/iface/http/user.go</code>). Then, it registers a route with the <code>ginx</code> module to handle the corresponding requests (<code>module/user/module.go:30</code>).</p><p>Here you will notice the <code>container.Invoke</code> method. Yes, the framework uses dependency injection (we are trying to find a balance between development efficiency and execution efficiency).</p><p>The object instantiation method is bound in the <code>Init</code> method mentioned above (<code>module/user/module.go:21</code>).</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Please bind the instantiation method in the <code>Init</code> method, and use them in the <code>Boot</code> method or elsewhere.</p></div><p>Start the service with <code>go run .</code>, then access <code>http://localhost:8080/hello?username=zed</code>.</p><h2 id="more-complete-example" tabindex="-1">More Complete Example <a class="header-anchor" href="#more-complete-example" aria-label="Permalink to &quot;More Complete Example&quot;">â€‹</a></h2><p>Clone the code to your local machine:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> step2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --single-branch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git@github.com:zeddy-go/quickstart.git</span></span></code></pre></div><p>In this example, the directory structure is as follows:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>.</span></span>
<span class="line"><span>â”œâ”€â”€ config                                // Configuration</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ config.go</span></span>
<span class="line"><span>â”‚   â””â”€â”€ config.yaml</span></span>
<span class="line"><span>â”œâ”€â”€ docker-compose.yaml                   // This example uses Docker to start the MySQL database</span></span>
<span class="line"><span>â”œâ”€â”€ go.mod</span></span>
<span class="line"><span>â”œâ”€â”€ go.sum</span></span>
<span class="line"><span>â”œâ”€â”€ main.go                               // Entry file</span></span>
<span class="line"><span>â””â”€â”€ module</span></span>
<span class="line"><span>    â””â”€â”€ user</span></span>
<span class="line"><span>        â”œâ”€â”€ domain                        // Domain layer</span></span>
<span class="line"><span>        â”‚         â”œâ”€â”€ contract.go         // Some interfaces</span></span>
<span class="line"><span>        â”‚         â”œâ”€â”€ svc                 // Services</span></span>
<span class="line"><span>        â”‚         â”‚     â””â”€â”€ user.go</span></span>
<span class="line"><span>        â”‚         â””â”€â”€ user.go             // Domain entity</span></span>
<span class="line"><span>        â”œâ”€â”€ iface                         // Interface layer</span></span>
<span class="line"><span>        â”‚         â””â”€â”€ http</span></span>
<span class="line"><span>        â”‚               â”œâ”€â”€ payload.go</span></span>
<span class="line"><span>        â”‚               â””â”€â”€ user.go       // User handler</span></span>
<span class="line"><span>        â”œâ”€â”€ infra</span></span>
<span class="line"><span>        â”‚         â”œâ”€â”€ migration           // Migration</span></span>
<span class="line"><span>        â”‚         â”‚     â”œâ”€â”€ 20240408063653_create_users_table.down.sql</span></span>
<span class="line"><span>        â”‚         â”‚     â”œâ”€â”€ 20240408063653_create_users_table.up.sql</span></span>
<span class="line"><span>        â”‚         â”‚     â””â”€â”€ migration.go</span></span>
<span class="line"><span>        â”‚         â”œâ”€â”€ model               // Data model</span></span>
<span class="line"><span>        â”‚         â”‚     â””â”€â”€ user.go</span></span>
<span class="line"><span>        â”‚         â”œâ”€â”€ repo                // Repository</span></span>
<span class="line"><span>        â”‚         â”‚     â””â”€â”€ user.go</span></span>
<span class="line"><span>        â”‚         â””â”€â”€ seed                // Data seeding</span></span>
<span class="line"><span>        â”‚               â””â”€â”€ user.go</span></span>
<span class="line"><span>        â””â”€â”€ module.go                     // Module entry</span></span></code></pre></div><h2 id="data-operations" tabindex="-1">Data Operations <a class="header-anchor" href="#data-operations" aria-label="Permalink to &quot;Data Operations&quot;">â€‹</a></h2><p>In this example, the data model is similar to the domain entity, but in actual projects, a domain entity may also be composed of data from multiple data models. Business logic only uses domain entities, so when operating on data through a repository, the repository will help us with bidirectional conversion.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>The repository has a simple conversion logic built-in, but it may not suffice for complex situations. In this case, you will need to define your own conversion logic.</p></div><h2 id="data-migration" tabindex="-1">Data Migration <a class="header-anchor" href="#data-migration" aria-label="Permalink to &quot;Data Migration&quot;">â€‹</a></h2><p>The built-in migration module of the framework uses the <code>github.com/golang-migrate/migrate</code> package to implement migrations. This also needs to be registered in the module entry (<code>module/user/module.go:41</code>). After the program starts, the database tables will be automatically created.</p><h2 id="data-seeding" tabindex="-1">Data Seeding <a class="header-anchor" href="#data-seeding" aria-label="Permalink to &quot;Data Seeding&quot;">â€‹</a></h2><p>The framework has built-in data seeding, which is quite simple in principle; it utilizes the container to execute functions. This also needs to be registered in the module entry (<code>module/user/module.go:42</code>). After the program starts, the data will be automatically seeded into the database.</p><h2 id="user-handler" tabindex="-1">User Handler <a class="header-anchor" href="#user-handler" aria-label="Permalink to &quot;User Handler&quot;">â€‹</a></h2><p>In the <code>user</code> handler, we have added two methods: one for creating a user and another for retrieving user information. Like the first example, we have also registered two new routes in <code>module.go</code>.</p><p>You will notice that these two new methods have a different number of return values compared to the methods in the first example. This is another feature of the framework: variable parameters and return values for each handler function.</p><p>The framework allows you to design your own parameters and return values for each handler function. For parameters, the framework will iterate through the parameter list, looking for objects in the container (dependency injection) or parsing request parameters. For return values, the framework will iterate through the return value list to decide how to return the response.</p><h2 id="adding-grpc-service" tabindex="-1">Adding gRPC Service <a class="header-anchor" href="#adding-grpc-service" aria-label="Permalink to &quot;Adding gRPC Service&quot;">â€‹</a></h2><p>Clone the code to your local machine:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> step3</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --single-branch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git@github.com:zeddy-go/quickstart.git</span></span></code></pre></div><p>We add gRPC service on top of the previous project, allowing our service to handle both HTTP and gRPC, and also to demonstrate the characteristic of code reuse. Of course, if your project only requires gRPC, you can completely ignore the HTTP-related code.</p><p>The project directory structure is as follows:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>.</span></span>
<span class="line"><span>â”œâ”€â”€ conf</span></span>
<span class="line"><span>â”‚    â”œâ”€â”€ config.go</span></span>
<span class="line"><span>â”‚    â””â”€â”€ config.yaml</span></span>
<span class="line"><span>â”œâ”€â”€ docker-compose.yaml</span></span>
<span class="line"><span>â”œâ”€â”€ go.mod</span></span>
<span class="line"><span>â”œâ”€â”€ go.sum</span></span>
<span class="line"><span>â”œâ”€â”€ main.go</span></span>
<span class="line"><span>â”œâ”€â”€ module</span></span>
<span class="line"><span>â”‚       â””â”€â”€ user</span></span>
<span class="line"><span>â”‚             â”œâ”€â”€ domain</span></span>
<span class="line"><span>â”‚             â”‚       â”œâ”€â”€ contract.go</span></span>
<span class="line"><span>â”‚             â”‚       â”œâ”€â”€ svc</span></span>
<span class="line"><span>â”‚             â”‚       â”‚     â””â”€â”€ user.go</span></span>
<span class="line"><span>â”‚             â”‚       â””â”€â”€ user.go</span></span>
<span class="line"><span>â”‚             â”œâ”€â”€ iface</span></span>
<span class="line"><span>â”‚             â”‚       â”œâ”€â”€ grpc</span></span>
<span class="line"><span>â”‚             â”‚       â”‚     â””â”€â”€ user.go            // gRPC interface implementation</span></span>
<span class="line"><span>â”‚             â”‚       â””â”€â”€ http</span></span>
<span class="line"><span>â”‚             â”‚           â”œâ”€â”€ payload.go</span></span>
<span class="line"><span>â”‚             â”‚           â””â”€â”€ user.go</span></span>
<span class="line"><span>â”‚             â”œâ”€â”€ infra</span></span>
<span class="line"><span>â”‚             â”‚       â”œâ”€â”€ migration</span></span>
<span class="line"><span>â”‚             â”‚       â”‚     â”œâ”€â”€ 20240408063653_create_users_table.down.sql</span></span>
<span class="line"><span>â”‚             â”‚       â”‚     â”œâ”€â”€ 20240408063653_create_users_table.up.sql</span></span>
<span class="line"><span>â”‚             â”‚       â”‚     â””â”€â”€ migration.go</span></span>
<span class="line"><span>â”‚             â”‚       â”œâ”€â”€ model</span></span>
<span class="line"><span>â”‚             â”‚       â”‚     â””â”€â”€ user.go</span></span>
<span class="line"><span>â”‚             â”‚       â”œâ”€â”€ repo</span></span>
<span class="line"><span>â”‚             â”‚       â”‚     â””â”€â”€ user.go</span></span>
<span class="line"><span>â”‚             â”‚       â””â”€â”€ seed</span></span>
<span class="line"><span>â”‚             â”‚             â””â”€â”€ user.go</span></span>
<span class="line"><span>â”‚             â””â”€â”€ module.go</span></span>
<span class="line"><span>â”œâ”€â”€ pb                                             // Protocol Buffers (pb) files</span></span>
<span class="line"><span>â”‚    â”œâ”€â”€ user_grpc.pb.go</span></span>
<span class="line"><span>â”‚    â””â”€â”€ user.pb.go</span></span>
<span class="line"><span>â”œâ”€â”€ readme.md</span></span>
<span class="line"><span>â””â”€â”€ user.proto                                     // Protocol Buffers (proto) file</span></span></code></pre></div><p>In the <code>main.go</code> file, we add the built-in gRPC module (main.go:21). To register our own service, simply obtain the instantiated <code>*grpc.Server</code> from the container in the <code>module/user/module.go</code> file (module/user/module.go:44,module/user/module.go:65).Additionally, you can see that in the gRPC interface implementation file, we have reused the <code>userService</code>.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>You can definitely solidify your frequently used code into framework modules.</p></div><p>Each object in the container defaults to a singleton pattern. Thanks to being resident in memory, instantiated objects will not be instantiated again, which is beneficial for execution efficiency.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>The <code>github.com/zeddy-go/zeddy/errx</code> package silently collects the error stack. You can use the following code to print it: <code>fmt.Printf(&quot;%#v&quot;, err)</code>. Moreover, this information will not be lost even after being transmitted via gRPC.</p></div></div></div></main><footer class="VPDocFooter" data-v-7a01fee6 data-v-9a032d81><!--[--><!--]--><!----><nav class="prev-next" data-v-9a032d81><div class="pager" data-v-9a032d81><!----></div><div class="pager" data-v-9a032d81><a class="VPLink link pager-link next" href="/doc/concept/ioc.html" data-v-9a032d81><!--[--><span class="desc" data-v-9a032d81>Next page</span><span class="title" data-v-9a032d81>IoC</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"index.md\":\"D5XJPeEI\",\"zh_concept_module.md\":\"BN80lJV5\",\"module_configx.md\":\"C87jjTPA\",\"markdown-examples.md\":\"BBFyeFKt\",\"quickstart.md\":\"Bpt8CVfy\",\"zh_index.md\":\"CLWadiwW\",\"zh_concept_ioc.md\":\"ktV6d4ar\",\"concept_module.md\":\"IQueO1ym\",\"zh_module_configx.md\":\"C6-Q-6UX\",\"concept_ioc.md\":\"CpXG-047\",\"zh_module_ginx.md\":\"Bm9FohXi\",\"api-examples.md\":\"BGcoxGv1\",\"module_ginx.md\":\"B5fiqbhn\",\"zh_quickstart.md\":\"YC0nSiTK\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"zeddy\",\"description\":\"A Convenient Framework\",\"base\":\"/doc/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[],\"sidebar\":{\"/\":[{\"text\":\"\",\"items\":[{\"text\":\"quick start\",\"link\":\"/quickstart\"},{\"text\":\"concept\",\"items\":[{\"text\":\"IoC\",\"link\":\"/concept/ioc.md\"},{\"text\":\"module\",\"link\":\"/concept/module.md\"}]},{\"text\":\"module list\",\"items\":[{\"text\":\"configx\",\"link\":\"/module/configx\"},{\"text\":\"ginx\",\"link\":\"/module/ginx\"}]}]}],\"/zh/\":[{\"text\":\"\",\"items\":[{\"text\":\"å¿«é€Ÿå¼€å§‹\",\"link\":\"/zh/quickstart\"},{\"text\":\"æ¦‚å¿µ\",\"items\":[{\"text\":\"IoC\",\"link\":\"/zh/concept/ioc.md\"},{\"text\":\"æ¨¡å—\",\"link\":\"/zh/concept/module.md\"}]},{\"text\":\"æ¨¡å—åˆ—è¡¨\",\"items\":[{\"text\":\"configx\",\"link\":\"/zh/module/configx\"},{\"text\":\"ginx\",\"link\":\"/zh/module/ginx\"}]}]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/zeddy-go/zeddy\"}]},\"locales\":{\"root\":{\"label\":\"English\",\"lang\":\"en\"},\"zh\":{\"label\":\"ä¸­æ–‡\",\"lang\":\"zh\"}},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>